% Bachelor Thesis, 2012
% Software Engineering at Blekinge Institute of Technology
% 
%
% Authors:    Fredrik Olsson, Johannes Björk
% Supervisor: Nina D. Fogelström
% 
% Copyright 2012,  Fredrik Olsson and Johannes Björk
% All rights reserved

\documentclass{llncs}

\usepackage[utf8x]{inputenc}
\usepackage{pdfpages}
\usepackage{graphicx}
\usepackage{ctable}
\usepackage{tabularx}
\usepackage{subfig}
\usepackage{url}
\usepackage{fancyhdr}




\hyphenation{ESB foo-bar-baz}

\begin{document}

\includepdf{thesis-main.pdf}

\begin{abstract}
This bachelor thesis looks into the use Enterprise Service Bus(ESB) as the central hub in system integration, which is currently the newest standard for large-scale system integration. The thesis is focused on issues with ESB integration and solutions to these problems, as the positive aspects have already been covered in other reports.
There has been no real 
 These guidelines was formed by answers from a questionnaire that is in turn formed by a literature review, designed to find issues with ESB integration.
We can conclude that a project that is well informed can avoid a whole lot of the the initial issues with some planning, if they follow the guidelines listed at the end of this thesis.

\keywords{ESB, Enterprise Service Bus, ESB issues, Service Bus problems}
\end{abstract}

\newpage
\setcounter{tocdepth}{3}

\tableofcontents

\setcounter{page}{1}
\pagestyle{plain}

\newpage

\section{Introduction}
A lot of companies have an increasing need to integrate different software to create systems that is able to automatically handle large parts of business logic. Systems that are integrated with each other can save both time and money, as they can cut out time consuming, manual handling of data transfer.

The current de facto standard for software integration is called Enterprise Service Bus (ESB)\cite{esb}. The ESB handles all communication between different individual systems (nodes) that are to be integrated in the finished system.

The ESB needs to be able to provide different interfaces for nodes to communicate and also needs the capability to transform data so that all nodes receives data that it can understand and work with.

But how easy is it to start up with integration using an ESB?

The goal of this paper is to find as many  issues as possible concerning software integration with an Enterprise Service Bus (ESB), and also try to find solutions to these issues.

The purpose is to make integration with ESB easier by pinpointing the available solutions to known issues and if no solutions are available, try to find our own methods to deal with those problems.

The aim is to provide some kind of solution to every issue that we encounter during the literature review section.

Our methods consist of two parts:
\begin{enumerate}
 \item Literature review - Information will be collected from research databases available via BTH and the collected articles will give a base of issues that needs to be addressed.
 \item Interviews/Surveys - Based on the result from the literature review, a survey will be created where we will try to confirm if the found issues are also experienced by the practitioners. If so, do they have a possible solution of their own and if not, how are the issues handled.
\end{enumerate}
The result of this paper will hopefully provide a guideline to developers that are new to integration with ESB. A resource that will help them get past the most common issues and give them a quicker start with development.


\subsection{State of the art}

Enterprise Service Bus: A Performance Evaluation \cite{sanjay11} provides performance comparisons between different ESB solutions. It compares ServiceMix\cite{servicemix}, Mule ESB\cite{mule} and WSO2 ESB\cite{wso2} by stress testing the core functionality of an ESB for each solution. Getting on Board the Enterprise Service \cite{ortiz07} brings up various problems relating to the implementation cost of an ESB and also the complexity of migration and older integration solutions into an ESB. It brings up the problems of what functionality goes in the nodes if possible and what goes in the ESB to get the best performance. An Integration Strategy for large Enterprises \cite{risimic06} discusses pros and cons when choosing an integration solutions. For example that using SOA when dealing with homogeneous system is not the most cost effective solution because of the additional overhead that is not required when integrating non heterogeneous systems. A High Performance Enterprise Service Bus Platform for Complex Event Processing \cite{bo08} suggests improvement of algorithms to increase performance and backs it up with mathematical equations. A Scalable and Dynamic Service Oriented Workflow Model \cite{yang11}. Discusses the problems with the UDDI and takes up improvements for a better UDDI where services picks the best service for the task depending if it’s online if not it auto picks another from the choices the UDDI provides. 

What we have concluded from the available literature we see there is a lack of information concerning the problems and shortcomings of ESB integration.
Most of the papers we read discussed the advantages of ESB compared to older integration solutions like Hub-and-Spoke and Point-to-Point. Many of the papers focused on comparisons of different ESB solutions, those do not provide information on disadvantages of an ESB solutions just performance data on various ESB products. Because of these conclusions we decided to focus our thesis on the disadvantages of the ESB integration architecture.

\section{Theory}
In this section we will provide the background knowledge that can be useful to be able to understand what we are investigating.
The techniques and terms explained are:
\begin{itemize}
\item Point-to-Point Integration
\item Hub-and-Spoke Integration
\item Enterprise Servise Bus (ESB)
\item Service Oriented Architecture (SOA)
\item Simple Object Access Protocol (SOAP)
\item Web Services Description Language (WSDL)
\item Universal Descriptionm Discovery and Integration (UDDI)
\item Representational State Transfer (REST)
\item Client-server
\item Stateless
\item Cache
\item Uniform interface
\item Layered system
\item Code-on-demand
\item a description of our current software engineering project
\end{itemize}

\label{sec:background}

\subsection{Point-to-Point Integration}
The existing integration architecture is the result of the Point-to-Point integration pattern. Initially not much thought was given to the integration because of software development was mostly done on a application level. Most of the communication was an internal one. While this method of integration was done quickly and cheaply it became very hard and expensive to expand if new connectivity was required. Today's integration problem as a result of tightly fitted software coupling could be traced back to this early integration pattern. The topology makes it very hard add a node into this integration pattern. Because every node in the web needs to have connectivity with each other, increases each additional node the complexity of the system. The  formula for calculating the number of connection for each additional node is (n(n-1))/2 \cite{risimic06} where n is the number of nodes that needs to be integrated. For example if 5 nodes needs to be integrated 10 additional connections are required.

This method is simple and may appeal when there is just a few nodes that needs to be integrated, but when the business changes and there is a need to add additional nodes the integration may become extremely costly and the result very brittle. If your application just contains 3 nodes or less and there are no plans for further expansion, then Point-to-Point is possibly a good solutions but otherwise a more complex integration pattern should be considered.


\subsection{Hub-and-Spoke Integration}
The Hub-and-Spoke\cite{risimic06,hasptp} method was the next step of integration patterns. In this pattern a central hub connects each node with a spoke. For each additional node only a single new connection needs to be defined. From this model much of the required components that exists today was laid out and defined: Message transformation, Message protocol standards, protocol security translation and so on. Once integration with multiple system was possible the need to share resources became great. The first method of integration with multiple systems came with the Remote Procedure Call (RPC) which was designed to function in a similar way as a local procedure call. The rise of distributed computing required a more modular system architecture and as a result required a more complex integration solution. The technologies of Remote procedure call and Distributed Object uses a method of tightly specified interfaces. As the system became more complex the and more changes to the interfaces as a result, it became very hard and costly to maintain and update those interfaces. Additional problems arose because of disparate system was not able to natively communicate with each other and resulted in many communication problems. These problems instagated in the rise of manny new communication technologies. One of those was Web Services, which is a point-to-point pattern with well defined and loosely coupled interfaces. The definition of loosely coupled is that the message can contain an undefined payload in either a text or a binary format.

The advantages of hub and spoke compared to point to point is that it has a reduced number of required connections. It also decouples the different nodes so they do not have to know about each other and makes it much easier to add and remove nodes. Because the only changes that have to be made is in the hub. As a result we have a system of independent distributed nodes that are interchangeable alto with the tight coupling that hub-and-spoke uses this is hard and time costly.

\subsection{Enterprise Service Bus ESB}
The Enterprise Service Bus is the newest iteration of Integration solutions. Today an Enterprise Service Bus is the most popular infrastructure for implementing Service-Oriented Architectures\cite{esb}.The topology resembles that of the Hub-and-Spokes. The main difference of the ESB to the Hub-and-spoke is that ESB focus on open standards and manly on Service Oriented Architecture.

Some of the core features of an ESB is:
\begin{itemize}
\item Message transformation - To transform messages between different message protocols.
\item Message Enrichment - the ability to enrich required missing data into a message.
\item Message Routing - A message should be able to traverse the flow in number of ways according to standard patterns.
\item Protocol translation - The possibility to send message on different types of transmission protocols.
\item Security - To be able to translate and support different security protocols.
\item Messaging- Support for asynchronous and synchronous messaging, request/response, send-and-forget, publish/subscribe.
\item Transaction Management - The ability to support different types of transaction standards.
\item Platform independent - The ESB should only use protocols and technologies that are platform independent.
\item Audit - Monitoring status, logging, metrics, administration console.
\item Legacy System - Support for legacy system protocols to allow integration with older system.
\item Message Aggregation/Splitting - To be able to merge and split messages.
\item Schema Validation - The possibility to verify the correctness of a message according to the message definition.
\item Business rules - To support integration with a Business processing language.
\end{itemize}



\subsection{Service Oriented Architecture SOA}
Web services provide a standard means of interoperating between different software applications\cite{w3csoa}. SOA is a framework for integration based on open defined standards. It focuses on services with  loosely coupled well defined interfaces. As it uses platform independent standards it is a good fit for integration in heterogeneous environments. SOA exposes well defined interfaces for service and uses a stateless implementations to perform specific business tasks. The standards which SOA achieves its platform independence is Simple Object Access Protocol (SOAP) which is a message protocol defined in xml, Web Service Description Language (WSDL) which is a definition of what a SOAP message should contain and which SOAP operations exists, the Universal Description, Definition and Integration (UDDI) which contains which services a system exposes, Representational State Transfer (REST) is constraints which message and process should behave and WS-I which is guidlines to make disparate system interoperable.

\subsection{Simple Object Access Protocol SOAP}
SOAP is a lightweight protocol intended for exchanging structured information in a decentralized, distributed environment\cite{w3csoap}. SOAP is a XML based message protocol. It can be together with other application layer protocol but are mostly sent with HTTP. SOAP is platform independent and therefore much used for software  integration. SOAP is the next generation XML-RPC but it still borrows some of its features. SOAP can be combined with WS-* standards like WS-Security which adds a layer of security to the protocol, by requiring username and password or other types of security tokens. The SOAP protocol has some advantages/disadvantages.

Advantages
\begin{itemize}
\item The SOAP protocol allows transportation on a various unspecific types of application and transportation layer protocols.
\end{itemize}
Disadvantages
\begin{itemize}
\item The protocol can be considered slow because of its XML format with its verbose nature is easy for humans to read but unnecessary large for a computer to process. Small messages can result in performance issues because of the large XML overhead that is required in SOAP. There is alternatives to SOAP where data is sent in binary form it reduces the size but makes it harder to correct errors.
\end{itemize}


\subsection{Web Services Description Language WSDL}
WSDL is a XML based schema languages used to define which operations a web service provides. A WSDL document defines services\cite{w3cwsdl}. It provides detailed information of what the message shall contain, which data types the data shall be in, what operation shall be performed, which URL the request shall be sent to, what a successful and error message should look like and contain. WSDL works well with SOAP. The WSDL is published together with the service so that a SOAP message can be generated to whoever has access to the service. Additionally a incoming SOAP message can be validated according to the WSDL so that only messages that follows the standard will be processed. This feature can be expensive so it is usually turned off when the communication is internal, because it relies on that the connecting client follows the standard without having to verify it.

\subsection{Universal Description, Discovery and Integration UDDI}
UDDI is a XML standard that contains information about Web Service and its functionality\cite{yang11}. it uses SOAP to communicate. It is used for identify what a service does and help a consumer find which service suits him best to perform a specific task. The register also contains technical information and links to the various WSDL.

\subsection{Representational state transfer REST}
REST is a standard for how a web standard like HTTP and URL should be used. To confirm to this standards is to be RESTful. The Representational State Transfer (REST) style is an abstraction of the architectural elements within a distributed hypermedia system\cite{rest}.The REST architecture consists of six constraints. 

\subsubsection{Client–Server}
Separating user interface with data storage. The server is not aware of the user interface it just provides the data and vice versa. This will improve the scalability allowing the clients to be interchangeable.

\subsubsection{Stateless}
No client context should be stored on the server. Every request should contain all the required information. Session state should therefore be held on the client. This method will increase the scalability because of no context data will be required to shared over the system. There is also disadvantages like increased data transmission because of no data will be stored on the server. Resulting in repetitive data transmission of the user credentials.

\subsubsection{Cache}
Having support for labeling message cacheable or uncacheable. Allowing the client  to reuse response data later. Advantages of this method is that the response-time for request will be reduced. Disadvantages of this is that caching allows the possibility of the data becoming stale.

\subsubsection{Uniform Interface}
Decoupling the interface from the service allowing the client and server application to be developed  independently. The disadvantage is that the data need to be transformed into a general form before being transmitted instead of being in the form of what an specific application optimally wants it in.

\subsubsection{Layered System}
Using a architecture hierarchy will result in improved system scalability, allowing load-balancing and shared caches. The client will not know if he is connected directly to the server or to a intermediary like a load balancer. This layer system style shields each layer so that each component are just aware of components it directly communicates with. This allows the component layers to be easily interchangeable.

\subsubsection{Code-on-Demand}
This is an optional constraint. This allows the server to provide finished code that contains general functionality to be used in client. Allowing the server to change part of the client code. The code can be in a form of JavaScript or Java applets.

\section{Research questions and research design}
In this section we will present our research questions and also how we plan to find answers to these questions. We will provide the details on how we will collect published articles and how this will lead to the forming of a questionnaire to be used in further information gathering.
\subsubsection{Research Questions}
We want to find as many ESB integration obstacles as possible and then provide solutions to these. Our aim with this is to produce guidelines for developers who is to begin with ESB integration to help them avoid unnecessary cost and timeloss.
\begin{description}
\item[RQ1] What disadvantages are mentioned of ESB solutions and in what context in the literature?
\item[RQ2] What disadvantages are experienced by the practitioners?
\item[RQ2.1] Are there any available suggested solutions or improvements?
\end{description}

\subsection{Methods for answering research questions}

\begin{description}
\item[RQ1] Study of the result from the literature review.
\item[RQ2] Interviews with participants from a leading telecom company in Europe and also developers from the project we are currently working in. The interviews will be conducted with a survey based on the result from \emph{RQ1}.
\item[RQ2.1] Study of the result from \emph{RQ1} and answers given in \emph{RQ2}. Besides this, we will gather information from the various communities connected to the different ESB solutions.
\end{description}

\subsection{Literature review design}
Information has been gathered from research databases using the following query strings:
\begin{itemize}
\item enterprise service bus
\item esb problems
\item esb issues
\item enterprise service bus problems
\item enterprise service bus issues
\item esb advantages
\item esb disadvantages
\item enterprise service bus advantages
\item enterprise service bus disadvantages
\end{itemize}

Searches were conducted on the library of Blekinge institute of technology and our preferred databases are \emph{Engineering Village} and \emph{IEEE}.

To limit our results, we decided to disregard articles that were published prior to 2005, as this field is in eternal progress and information gets old fast.
Other criteria that needs to be met is a clear value to the purposes of this paper in the abstract, since time is of the essence we will not have time to read papers that we are not sure will give ous something.

\subsection{Literature review results}

The following papers were found during our literature review, and passed our selection criteria:
\begin{enumerate}
\item Enterprise Service Bus: A Performance Evaluation\cite{sanjay11}. Published by Sanjay P. Ahuja, Amit Patel in 2011. This paper seemed useful because it contained a performance analysis between different types of ESBs.
\item SOAs \& ESBs\cite{paisley05}. Published by J. Paisley in 2005. This article brings up some of the difficulties that can be encountered when implementing an ESB.
\item Getting on Board the Enterprise Service\cite{ortiz07}. Published by S. Ortiz in 2007. This article brings up some of the challenges that can be encountered when implementing an ESB.
\item A high performance enterprise service bus platform for complex event processing\cite{bo08}. Published by Deng Bo,  Ding Kun and Zhang Xiaoyi in 2008. This paper brings up some of the challenges that can be encountered when implementing a complex ESB solution.
\item Service-Oriented Performance Modeling the MULE Enterprise Service Bus (ESB) Loan Broker Application\cite{brebner09}. Published by P. Brebner in 2009. This paper handles both scaling and performance in ESBs.
\item An integration strategy for large enterprises\cite{risimic06}. Published by Dejan Rismic in 2006. It provides information on important aspects of ESB. This is needed to be able to understand and improve the ESB.
\item Performance Prediction of Service-Oriented Applications based on an Enterprise Service Bus\cite{gorton07}. Published by Yan Liu, Ian Gorton and Liming Zhu in 2007. This paper handles important aspects of ESB performance. Needed to be able to find performance issues.
\end{enumerate}

After we settled on the these specific documents, we began reading through them from top to bottom, noting everything that can be seen as an issue or flaw in the ESB architecture.
Some of the included documents is not part of the literature to provide a source of issues, but instead serves as a source to be able to get better understanding of the ESB.
Besides these, all documents have one common denominator: They handle aspects of the ESB that can be seen as issues or in need of improvement.
The literature study gave us the following list with issues/flaws in ESB solutions:

\begin{enumerate}
\item It is hard to decide where all functionality goes. It has been mentioned that it is not always clear if functionality should be placed in the ESB or in one of the nodes in the system. A format transformation for example, could sometimes as easily be implemented in a node as in the ESB.  \cite{ortiz07}.
\item There is a risk of slow performance, as the ESB prohibits direct communication between nodes, providing an additional step between nodes.
\item Migration of systems integrated with older architectures can be hard to do as older systems can have communication that goes everywhere and no clear way of sorting the flows.\cite{ortiz07}.
\item Support is sometimes limited and documentation and community answers is not always available without a lot of effort.
\end{enumerate}

We thought that we would find more issues in this field and there is a slight possibility that we have missed articles that could provide more information. But we feel confident that the search strings we used, in the databases we searched, provided us with articles that together covers the issues that are involved with integration with an ESB architecture.

\subsection{Interview survey design}

The survey is created from the result of the literature review and is designed to accomplish two things.
\begin{enumerate}
\item Confirm that the known issues from the literature review is also present in the projects we are involved in. If this is not the case, show how the particular issue has been handled.
\item See if there are other issues that we have not found in previous research papers. We will also try to get the participants to try to think of possible solutions.
\end{enumerate}

We chose to focus on issues and solutions to these. This is because a lot of the existing papers already have covered the positive parts of ESB integration and another list of good things would not give any real contribution.
Our goal is to have a range between six to eight participants in this survey with varying experience in ESB Integration. We initially try to get as many professional ESB Integrators as possible then if they are not enough we will ask participants from our software project who has experience in ESB integration. The reason we decided on the number of participants was because of the limited time we had we thought it reasonable with that range of people. The challenge was to find people we the experience who also had time to spare to answer our questionnaire. 

The survey will contain the following questions:
\label{survey}
\begin{itemize}

\item Do you have any experience with software integrating using an ESB?
\begin{itemize}
\item If so, what?
\end{itemize}

\item Is it hard to decide which part of the system functionality really belongs in the ESB?
\begin{itemize}
\item If so, please elaborate
\item If not, how do you decide?
\end{itemize}

\item Do you experience an issue with slower communication between nodes because of the extra steps that comes with an ESB?
\begin{itemize}
\item If so, please elaborate
\item If not, is it because the steps do not take any time or because the system does not require response?
\end{itemize}

\item Have you ever migrated older, integrated systems to the ESB architecture?
\begin{itemize}
\item If so, please describe the main issues encountered.
\item How did you do to resolve said issues?
\end{itemize}

\item Are you able to get support or find information to resolve the issues that are encountered during integration?
\begin{itemize}
\item If so, how do you find/get said help?
\item If not, how do you handle issues?
\end{itemize}

\item Have you encountered any issues, apart from the ones mentioned in this questionnaire, when working with ESB integration?

\item Have you been able to resolve any of these issues?
\begin{itemize}
\item If so, please describe your solutions.
\end{itemize}

\end{itemize}

These questiones was chosen to map the results in the literature review results.


\section{Data collecting results}
In this section we will present the results we got from the sampling that we performed.
\subsection{Survey setup}

We were involved in a student project together with 10 other students that worked together with a dominating, European telecom company in Karlskrona. The goal of this project was to integrate several of the companys existing products to create a totaly new system. We were using an ESB solution from Mulesoft\cite{mule}. The experiences of the participants in this project was worth a lot. Partially because everyone hd recently been involved in starting integration with an ESB and had the problems fresh in their memory ant partially because we, thanks to the companies position in the software development area, were able to get in personal contact with Mulesoft for guidance on how to progress with our development. During this guidance, we also got confirmation directly from Mulsesoft that there is known problems with the available documentation.

Our survey was filled out by seven individuals, all in some way connected to our current project. We chose participants based on their previous knowledge of system integration. Both with ESB and other techniques. Four of the participants are in our group and are currently working actively with integration using an ESB from Mulesoft, their value is explained in more detail in section 2.9. The other three are employees at the telecom company, which we have got in contact with while performing our project at the telecom company, the value of their answers is, as mentioned before, a lot of integration experience, both with ESB and other architectures, providing specific and generic knowledge.
The surveys was conducted by handing the participant a printed survey with our previously stated questions  in section \ref{survey}. After this, the person had all the time he or she needed to fill in their answers.
All the participants had one of us present at all time in case something was unclear, badly formulated or in case they just wanted to say something that was not covered by the survey. The survey where done anonymously by all participants. Their roles and experience where recorded during the interviews. The participants roles and experience can be found in Appendix A.

\subsection{Collected data}
The collected answers from the survey can be found in appendix A.

\subsection{Data analysis}

To map our results to our research questions, we begin by rereading the issues we found in the literature review:

\begin{enumerate}
\item It is hard to decide where all functionality goes. Some things could be placed in the ESB but might as well be in one of the nodes in the system.
\item There is a risk of slow performance, as the ESB prohibits direct communication between nodes.
\item Migration of systems integrated with older architectures can be hard to do.
\item Support is sometimes limited and documentation and community answers is not always available without a lot of effort.
\end{enumerate}

If we compare these initial issues one by one with the answers we got, we will see how well it maps with the development process, this may also provide a solution to the initial issues. This will later lead the way to an answer on research question 2 and 2.1

\begin{tabular}{ | l | p{9cm} | l | l |}
\hline
Nr & Question & Yes & No \\ \hline
Q1 & Do you have any experience with integration using an ESB? & 7 (100\%) & 0 (0\%) \\ \hline
\end{tabular}

\begin{description}
\item[Q1] The first question was an open ended question where the interviewee would describe their experience developing integration solutions using an ESB. To get a feel on how trustworthy and reliable their answers would be.
\end{description}

\begin{tabular}{ | l | p{9cm} | l | l |}
\hline
Nr & Question & Yes & No \\ \hline
Q2 & Is it hard to decide which part of the system functionality really belongs in the ESB? & 4 (50\%) & 4 (50\%)\\ \hline
\end{tabular}

\begin{description}
\item[Q2] On this question, we get a 50\% distribution of agreement to this issue. This is due to one participant answering “yes and no”. As it is not a unanimous agreement that the initial issue is in fact an obstacle, this provides possible solutions to the issue in question.
\end{description}

\begin{tabular}{ | l | p{9cm} | l | l |}
\hline
Nr & Question & Yes & No \\ \hline
Q3 & Do you experience an issue with slower communication between nodes because of the extra steps that comes with an ESB? & 2 (29\%) & 5 (71\%) \\ \hline
\end{tabular}

\begin{description}
\item[Q3] When trying to confirm this issue, we got ~71.4\% disagreement from the participants in the survey. As this is quite a large percentage it indicates that this is not a major issue. But still it’s not 100\%, so there may still be ways to resolve it.
\end{description}

\begin{tabular}{ | l | p{9cm} | l | l |}
\hline
Nr & Question & Yes & No \\ \hline
Q4 & Have you ever migrated older, integrated systems to the ESB architecture? & 0 (\%) & 7 (100\%) \\ \hline
\end{tabular}

\begin{description}
\item[Q4]  Unfortunately we couldn't find anyone who had dealt with migration of older integrated systems to the ESB architecture. This prevents us from obtaining solutions to issues connected to this issue.
\end{description}

\begin{tabular}{ | l | p{9cm} | l | l |}
\hline
Nr & Question & Yes & No\\ \hline
Q5 & Are you able to get support or find information to resolve the issues that are encountered during integration? & 2 (14\%) & 6 (86\%)\\ \hline
\end{tabular}

\begin{description}
\item[Q5] Again, the 8 answers is due to one of the participants both agreeing and disagreeing with the statement. However, this is clearly an issue in the industry. ~86\% of the participants in our survey claim to have problem in finding the information and support they need. The remaining percentile said when asked, that he had not been that involved with integration that he had to find any information that wasn't already available within the group.
\end{description}

These results provides us with possible answers to both research question 2 and 2.1 on all points except the issue with migration of previously integrated systems.

Since research question 1 gets its answers through the literature survey, this is a satisfiable result.

\section{Data synthesis and answer to research questions}
We found possible solutions to the majority of the known issues we found, these solutions are not guaranteed to work for everyone and in any situation but it still may provide assistance for developers that are stuck in the process of either deciding on integration architecture or are in active development.
From the survey we also found some additional issues concerning ESB integration that was not found in the available literature, some of these issues came with a solution and some came with hints on how to find a solution.

\subsection{Issues}

{
\setlength{\tabcolsep}{1ex}
\renewcommand{\arraystretch}{1.5}
\begin{tabular}{ | l | p{4cm} | p{6cm} | l | l |}
\hline
Nr & Issue & Solution & tmp & tmp \\ \hline
1.1 & It is hard to decide where all functionality goes. Some things could be placed in the ESB but might as well be in one of the nodes in the system. & In real world implementation, it is important to set rules of communication. As can be seen in the answers to question 2.2 in appendix a, a firm rule of how communication needs to be applied when beginning ESB implementation.  & tmp & tmp \\ \hline
1.2  & There is a risk of slow performance, as the ESB prohibits direct communication between nodes. & This should not be an issue as the ESB only performs actions that would need to be done by the individual nodes if the ESB wasn’t there to sort it out. As long as the ESB only does what it needs to do, all nodes should get what it needs, when it needs it. Any bottlenecks is most likely to be found in connection or slow servers. & tmp & tmp \\ \hline
1.3  & Migration of systems integrated with older architectures can be hard to do. & This issue can’t be either confirmed or dismissed. as we could not find any participant that had enough experience in integration to give any directions on the matter. & tmp & tmp \\ \hline
1.4  & Support is sometimes limited and documentation and community answers is not always available without a lot of effort. & This is absolutely confirmed and a solution is not easy to give. The survey-takers that are involved in our project are quite privileged. Since they are involved in a project tied to a leading telecom company (a company that have a huge influence on the industry, they got an easy access to first class assistance from the developers of the Mule ESB. Otherwise it is confirmed that support and community response is hard to get by and since our survey-takers have been privileged enough, we can confirm that support is an area where vast improvements are needed.  & tmp & tmp \\ \hline
\end{tabular}
}

{
\setlength{\tabcolsep}{1ex}
\renewcommand{\arraystretch}{1.5}
\begin{tabular}{ | l | p{4cm} | p{6cm} | l | l |}
\hline
Nr & Issue & Solution & tmp & tmp \\ \hline
ISSUE2.1 & If the team developing the ESB falls behind, this affects all teams that utilize the ESB. & No solution is provided. Hower, we believe that this issue can be handled by the fact that you know that it exists. If a project is to be started and the project manager knows about the issues that may occur, education can be started at an early stage, preventing slow progress on implementation & tmp & tmp \\ \hline
ISSUE2.2 & Big changes between different versions of the ESB makes it hard when documentation isn't up to date. & This, as far as we have found out, had been handled by trial and error. Unfortunately this is the best answer to this issue at the moment. A more stable solution is to choose a version of an ESB and stick to it, ignoring possible improvements in order to keep the functionality already implemented. & tmp & tmp \\ \hline
ISSUE2.3 & There is no stated standard, or best practice, when it comes to ESB implementation. & This is still an issue and will keep in being an issue. Until the different providers of ESB solutions sit down and decide on a common standard for a minimum of functionality, there is no way of deciding on what needs to be there to be able to say that you’ve got an ESB integrated system. & tmp & tmp \\ \hline
ISSUE2.4 & Problems when different nodes use different sessions. The ESB is usually stateless, meaning that it has no session id, this can be a problem if some nodes need their own sessions.  & This is an issue that can quite easily be handled. Several different session ids can be stored in the ESB in order to keep connection with all the nodes. Another solution is to make the ESB perform a login and logout on each node, every time  a request is made. & tmp & tmp \\ \hline
ISSUE2.5 & A lot of the ESB coding is done in XML which is not a proper programming language and this makes it hard to get a good overview of the code. & There are some xml editors with a GUI editor. These are not free from bugs, but combined with other tools they can provide an easier overview in the development process. & tmp & tmp \\ \hline
ISSUE2.6 & To get proper documentation, a enterprise license might be needed. This is expensive and might raise the projects budget. & This can be addressed in two ways. 1. Hope for the best. Meaning that the development relies on community and available documentation, with no additional economical cost for the project. 2. Purchase of enterprise license. Meaning a economical cost, but guarantees more documentation and support in the process. The first alternative would be advised for teams with experience of the platform and vice versa. & tmp & tmp \\ \hline
\end{tabular}
}




\begin{description}

\item[RQ1] The following issues can occur when implementing an ESB architecture solution in a software project (according to available documentation):
\begin{description}
\item[ISSUE1.1] It is hard to decide where all functionality goes. Some things could be placed in the ESB but might as well be in one of the nodes in the system.
\item[ISSUE1.2] There is a risk of slow performance, as the ESB prohibits direct communication between nodes.
\item[ISSUE1.3] Migration of systems integrated with older architectures can be hard to do.
\item[ISSUE1.4] Support is sometimes limited and documentation and community answers is not always available without a lot of effort.
\end{description}

\item[RQ2] The following issues were presented during the survey in addition to the issues found in the literature review:
\begin{description}
\item[ISSUE2.1] If the team developing the ESB falls behind, this affects all teams that utilize the ESB.
\item[ISSUE2.2] Big changes between different versions of the ESB makes it hard when documentation isn't up to date.
\item[ISSUE2.3] There is no stated standard, or best practice, when it comes to ESB implementation.
\item[ISSUE2.4] Problems when different nodes use different sessions. The ESB is usually stateless, meaning that it has no session id, this can be a problem if some nodes need their own sessions.
\item[ISSUE2.5] A lot of the ESB coding is done in XML which is not a proper programming language and this makes it hard to get a good overview of the code. 
\item[ISSUE2.6] To get proper documentation, a enterprise license might be needed. This is expensive and might raise the projects budget.
\end{description}
\end{description}

\subsection{Solutions}

\begin{description}
\item[RQ2.1] The provided, possible solutions to the encountered issues, these solutions have all come from the results in the sampling. None of the results have been tested, other than in the everyday development of the software integration project in which all the participants have been involved:
\begin{description}

\item[ISSUE1.1] In real world implementation, it is important to set rules of communication. As can be seen in the answers to question 2.2 in appendix a, a firm rule of how communication needs to be applied when beginning ESB implementation. 
\item[ISSUE1.2] This should not be an issue as the ESB only performs actions that would need to be done by the individual nodes if the ESB wasn’t there to sort it out. As long as the ESB only does what it needs to do, all nodes should get what it needs, when it needs it. Any bottlenecks is most likely to be found in connection or slow servers.
\item[ISSUE1.3] This issue can’t be either confirmed or dismissed. as we could not find any participant that had enough experience in integration to give any directions on the matter.
\item[ISSUE1.4] This is absolutely confirmed and a solution is not easy to give. The survey-takers that are involved in our project are quite privileged. Since they are involved in a project tied to a leading telecom company (a company that have a huge influence on the industry, they got an easy access to first class assistance from the developers of the Mule ESB. Otherwise it is confirmed that support and community response is hard to get by and since our survey-takers have been privileged enough, we can confirm that support is an area where vast improvements are needed. 
\end{description}

\begin{description}
\item[ISSUE2.1] No solution is provided. Hower, we believe that this issue can be handled by the fact that you know that it exists. If a project is to be started and the project manager knows about the issues that may occur, education can be started at an early stage, preventing slow progress on implementation
\item[ISSUE2.2] This, as far as we have found out, had been handled by trial and error. Unfortunately this is the best answer to this issue at the moment. A more stable solution is to choose a version of an ESB and stick to it, ignoring possible improvements in order to keep the functionality already implemented.
\item[ISSUE2.3] This is still an issue and will keep in being an issue. Until the different providers of ESB solutions sit down and decide on a common standard for a minimum of functionality, there is no way of deciding on what needs to be there to be able to say that you’ve got an ESB integrated system.
\item[ISSUE2.4] This is an issue that can quite easily be handled. Several different session ids can be stored in the ESB in order to keep connection with all the nodes. Another solution is to make the ESB perform a login and logout on each node, every time  a request is made.
\item[ISSUE2.5] There are some xml editors with a GUI editor. These are not free from bugs, but combined with other tools they can provide an easier overview in the development process.
\item[ISSUE2.6] This can be addressed in two ways. 1. Hope for the best. Meaning that the development relies on community and available documentation, with no additional economical cost for the project. 2. Purchase of enterprise license. Meaning a economical cost, but guarantees more documentation and support in the process. The first alternative would be advised for teams with experience of the platform and vice versa.
\end{description}

\end{description}

\section{Thesis conclusions and contribution}
So the goal with this report was to find beginner problems with ESB integration and solve this issues. Have we succeeded? Well, we have been able to provide answers to a large majority of the possible issues that can be encountered when implementing an ESB. Not only did we manage to find possible solutions or workarounds for most of the issues that were found in the literature review, but we also managed to provide solutions to almost every issue that came up in the surveys.
The issues that were not provided with a solution, at least comes with directions as how to handle. Providing this document should be enough to let a project planner make an informed decision on how to tackle ESB implementation. It provides information on what to consider when thinking about licenses and also information on how to handle flows within the system.

So are our methods comprehensive enough to give the result legitimacy? Compared to previously published work that has not given much focus on how to actually handle issues, this thesis is more focused on helping new practitioners to avoid the most common problems.
We mentioned our literature survey results and concluded that we where confident with the amount of information we were able to get from this actually was the most important parts. Given the answers from our sampling, it is confirmed that the issues we found are also the issues that is encountered by practitioners.
The number of performed interviews may be a little low, but we believe it still gave us the answers we needed. Since some of the participants have worked 6 months or less with ESB integration, we get the views of persons that has very recently been through all the problems with adapting to a new way of working. Furthermore, since these participants have been in direct contact with Mulesoft, they have been able to provide information that most developers will not be able to obtain. And with the more experienced integrationers from a leading European telecom company we got some insight from people who has more experience with various kinds of integration and because of this is able to provide more comparative information.

Previously available information fails to give a concluded image on ESB integration and issue handling, with this thesis all the pieces should be incorporated so that an informed plan can be established (see guidelines below).

If we would be to start over on this thesis, the main thing that we would change is that we would try to get a larger number of experienced practitioners as this would have increased the chance of getting tips on dealing with migration of older integrated systems. We would also have tried to perform some test of our own, to see if we could find problems with response times and such.

\section{Guidelines}
\begin{itemize}
\item Begin planning early and set up firm rules for information flow
\item If there is no previous experience with ESB integration in the project, start education prior to project start
\item Make sure you know what version of the chosen ESB solution you are going to use, so you know what information you can use
\item If many nodes use separate session id, store these in the ESB to make sure it can stay connected with all nodes
\item As a lot of ESB implementation is done in XML, it might be a good idea to look into XML editors with a GUI to make it easier to get an overview
\item If you feel you are going to need a lot of support, get an enterprise license
\end{itemize}

\newpage
\bibliographystyle{plain}
\bibliography{references}

\newpage
\section*{Appendixes}
\appendix

\includepdf[pages={1-5}]{appendix-a.pdf}

\end{document}